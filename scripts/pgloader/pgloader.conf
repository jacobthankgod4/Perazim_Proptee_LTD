# Sample pgloader configuration for MySQL -> Postgres migration
# Adjust connection strings and types as needed; test on staging only.

# simplest invocation uses CLI mapping directly; this file is a starting template.

# example: LOAD DATABASE
LOAD DATABASE
     FROM mysql://MYSQL_USER:MYSQL_PASS@MYSQL_HOST/MYSQL_DB
     INTO postgresql://PG_USER:PG_PASS@PG_HOST/PG_DB

 WITH include drop, create tables, create indexes, reset sequences, foreign keys

 SET maintenance_work_mem to '512MB', work_mem to '64MB'

 CAST type datetime to timestamptz using zero-dates-to-null,
      type json to jsonb drop typemod using identity

 BEFORE LOAD DO
    $$ create schema if not exists public; $$;
